
.#{$css-prefix}modal {
  opacity: 0;
  visibility: hidden;
  transition: transform $duration-quickly linear,
                opacity $duration-quickly linear;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ($z-index-modal + 1);

  &__container {
    position: relative;
    transform: translate(0, 0);
    transition: transform $duration-quickly linear,
                  opacity $duration-quickly linear;
    display: flex;
    flex-direction: column;
    justify-content: center;
    // margin: 0 $spacing-x-large; // what??
    margin: 0 auto;
    height: 100%;
    padding: $square-icon-large-boundary 0;
    border-radius: $border-radius-medium;

    @include mq-medium-min {
      margin: 0 auto;
      width: 50%;
      max-width: 40rem; // TODO: Tokenize
      min-width: 20rem; // TODO: Tokenize
    }
  }

  &__header,
  &__content {
    background: $color-background-alt;
  }

  &__header,
  &__footer {
    flex-shrink: 0;
  }

  &__header {
    position: relative;
    border: {
      top: {
        right-radius: $border-radius-medium;
        left-radius: $border-radius-medium;
      }
      bottom: $border-width-thick solid $color-border;
    }
    padding: $spacing-large $spacing-medium;
    text-align: center;

    + .#{$css-prefix}modal__menu {
      border-top: {
        left-radius: 0;
        right-radius: 0;
      }
    }
  }

  &__content {
    overflow: hidden {
      y: auto;
    }
  }

  &__menu {
    position: relative;
    border-radius: $border-radius-medium;
    padding: $spacing-medium;
    background-color: $color-background;
  }

  &__footer {
    border: {
      top: $border-width-thick solid $color-border;
      bottom: {
        right-radius: $border-radius-medium;
        left-radius: $border-radius-medium;
      }
    }
    padding: $spacing-small $spacing-medium;
    background-color: $color-background;
    text-align: right;
    box-shadow: $shadow-drop-down;
  }

  &__close {
    @include square($square-icon-large-boundary);
    position: absolute;
    top: -$square-icon-large-boundary;
    right: ((($square-icon-large-boundary - $square-icon-large-content) / 2) * -1);
  }
}

@mixin backdrop {
  // Mixin created to not have to paste this again into the new class it's being renamed to (see below)
  @include duration-slowly;
  @include square(100%);
  opacity: 0;
  visibility: hidden;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: $color-background-temp-modal-tint;
  z-index: $z-index-modal;

  &--open {
    visibility: visible;
    opacity: 1;
    transition: opacity $duration-slowly linear;
  }
}

// old class
.#{$css-prefix}modal-backdrop {

  @include deprecate('2.0.0') {
    @include backdrop;
  }
}

.#{$css-prefix}backdrop {
  // new class
  @include backdrop;
}



.#{$css-prefix}fade-in-open {
  opacity: 1;
  visibility: visible;
  transition: opacity $duration-quickly linear;

  .#{$css-prefix}modal__container-reset {
    opacity: 1;
    visibility: visible;
    transform: translate(0, 0);
  }
}

.#{$css-prefix}slide-up-open {
  opacity: 1;
  visibility: visible;
  transform: translate(0, 0);
  transition: opacity $duration-quickly linear,
              transform $duration-promptly linear;

  .#{$css-prefix}modal__container-reset {
    opacity: 0;
    visibility: hidden;
    transform: translate(0, $spacing-medium);
    transition: opacity $duration-promptly linear,
                transform $duration-promptly linear;
  }
}

.#{$css-prefix}slide-up-saving {
  opacity: 1;
  visibility: visible;
  transform: translate(0, -$spacing-medium);
}


.#{$css-prefix}slide-down-cancel {
  opacity: 1;
  visibility: visible;
  transform: translate(0, $spacing-medium);
}
